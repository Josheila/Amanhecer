{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 12, "column": 0}, "map": {"version":3,"sources":["file:///Users/sheilazhai/Documents/Amanhecer/pages/posts/%5Bslug%5D.tsx"],"sourcesContent":["// pages/posts/[slug].tsx\nimport fs from \"fs\";\nimport path from \"path\";\nimport matter from \"gray-matter\";\nimport { GetStaticPaths, GetStaticProps } from \"next\";\nimport { Post } from \"../../lib/posts\";\nimport Header from \"../../components/Header\";\nimport AvatarSection from \"../../components/AvatarSection\";\nimport ReactMarkdown from \"react-markdown\";\n\ninterface PostPageProps {\n  post: Post;\n}\n\nexport default function PostPage({ post }: PostPageProps) {\n  return (\n    <div\n      style={{\n        fontFamily: \"'Microsoft YaHei', Arial, sans-serif\",\n        padding: \"2rem\",\n      }}\n    >\n      <article style={{ maxWidth: \"800px\", margin: \"2rem auto\" }}>\n        {/* 封面 */}\n        {post.cover && (\n          <img\n            src={post.cover}\n            alt={post.title}\n            style={{\n              width: \"100%\",\n              borderRadius: \"8px\",\n              marginBottom: \"1rem\",\n              objectFit: \"cover\",\n              height: \"300px\",\n            }}\n          />\n        )}\n\n        {/* 标题和日期 */}\n        <h1 style={{ fontSize: \"2rem\", marginBottom: \"0.5rem\" }}>\n          {post.title}\n        </h1>\n        <p style={{ color: \"#666\", marginBottom: \"2rem\" }}>{post.date}</p>\n\n        {/* Markdown 正文 */}\n        <ReactMarkdown\n          children={post.content}\n          components={{\n            h1: ({ node, ...props }) => (\n              <h1\n                style={{ fontSize: \"1.8rem\", margin: \"1.5rem 0\" }}\n                {...props}\n              />\n            ),\n            h2: ({ node, ...props }) => (\n              <h2\n                style={{ fontSize: \"1.5rem\", margin: \"1.2rem 0\" }}\n                {...props}\n              />\n            ),\n            p: ({ node, ...props }) => (\n              <p style={{ lineHeight: \"1.8\", margin: \"0.8rem 0\" }} {...props} />\n            ),\n            img: ({ node, ...props }) => (\n              <img\n                style={{\n                  maxWidth: \"100%\",\n                  borderRadius: \"6px\",\n                  margin: \"1rem 0\",\n                }}\n                {...props}\n              />\n            ),\n          }}\n        />\n      </article>\n    </div>\n  );\n}\n\n// 获取所有文章的 slug\nexport const getStaticPaths: GetStaticPaths = async () => {\n  const postsDirectory = path.join(process.cwd(), \"posts\");\n  const filenames = fs.readdirSync(postsDirectory);\n\n  const paths = filenames.map((filename) => ({\n    params: { slug: filename.replace(/\\.md$/, \"\") },\n  }));\n\n  return { paths, fallback: false };\n};\n\n// 根据 slug 生成文章内容\nexport const getStaticProps: GetStaticProps = async ({ params }) => {\n  const slug = params?.slug as string;\n  const postsDirectory = path.join(process.cwd(), \"posts\");\n  const filePath = path.join(postsDirectory, slug + \".md\");\n  const fileContents = fs.readFileSync(filePath, \"utf8\");\n  const { data, content } = matter(fileContents);\n\n  const post: Post = {\n    slug,\n    title: data.title,\n    date: data.date,\n    summary: data.summary,\n    tags: data.tags || [],\n    cover: data.cover || \"\",\n    content,\n  };\n\n  return { props: { post } };\n};\n"],"names":[],"mappings":";;;;;;;;;AAAA,yBAAyB;AACzB;AACA;AACA;AAKA;;;;;;;;;;AAMe,SAAS,SAAS,EAAE,IAAI,EAAiB;IACtD,qBACE,qKAAC;QACC,OAAO;YACL,YAAY;YACZ,SAAS;QACX;kBAEA,cAAA,qKAAC;YAAQ,OAAO;gBAAE,UAAU;gBAAS,QAAQ;YAAY;;gBAEtD,KAAK,KAAK,kBACT,qKAAC;oBACC,KAAK,KAAK,KAAK;oBACf,KAAK,KAAK,KAAK;oBACf,OAAO;wBACL,OAAO;wBACP,cAAc;wBACd,cAAc;wBACd,WAAW;wBACX,QAAQ;oBACV;;;;;;8BAKJ,qKAAC;oBAAG,OAAO;wBAAE,UAAU;wBAAQ,cAAc;oBAAS;8BACnD,KAAK,KAAK;;;;;;8BAEb,qKAAC;oBAAE,OAAO;wBAAE,OAAO;wBAAQ,cAAc;oBAAO;8BAAI,KAAK,IAAI;;;;;;8BAG7D,qKAAC,6TAAa;oBACZ,UAAU,KAAK,OAAO;oBACtB,YAAY;wBACV,IAAI,CAAC,EAAE,IAAI,EAAE,GAAG,OAAO,iBACrB,qKAAC;gCACC,OAAO;oCAAE,UAAU;oCAAU,QAAQ;gCAAW;gCAC/C,GAAG,KAAK;;;;;;wBAGb,IAAI,CAAC,EAAE,IAAI,EAAE,GAAG,OAAO,iBACrB,qKAAC;gCACC,OAAO;oCAAE,UAAU;oCAAU,QAAQ;gCAAW;gCAC/C,GAAG,KAAK;;;;;;wBAGb,GAAG,CAAC,EAAE,IAAI,EAAE,GAAG,OAAO,iBACpB,qKAAC;gCAAE,OAAO;oCAAE,YAAY;oCAAO,QAAQ;gCAAW;gCAAI,GAAG,KAAK;;;;;;wBAEhE,KAAK,CAAC,EAAE,IAAI,EAAE,GAAG,OAAO,iBACtB,qKAAC;gCACC,OAAO;oCACL,UAAU;oCACV,cAAc;oCACd,QAAQ;gCACV;gCACC,GAAG,KAAK;;;;;;oBAGf;;;;;;;;;;;;;;;;;AAKV;AAGO,MAAM,iBAAiC;IAC5C,MAAM,iBAAiB,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;IAChD,MAAM,YAAY,wGAAE,CAAC,WAAW,CAAC;IAEjC,MAAM,QAAQ,UAAU,GAAG,CAAC,CAAC,WAAa,CAAC;YACzC,QAAQ;gBAAE,MAAM,SAAS,OAAO,CAAC,SAAS;YAAI;QAChD,CAAC;IAED,OAAO;QAAE;QAAO,UAAU;IAAM;AAClC;AAGO,MAAM,iBAAiC,OAAO,EAAE,MAAM,EAAE;IAC7D,MAAM,OAAO,QAAQ;IACrB,MAAM,iBAAiB,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;IAChD,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,gBAAgB,OAAO;IAClD,MAAM,eAAe,wGAAE,CAAC,YAAY,CAAC,UAAU;IAC/C,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,gPAAM,EAAC;IAEjC,MAAM,OAAa;QACjB;QACA,OAAO,KAAK,KAAK;QACjB,MAAM,KAAK,IAAI;QACf,SAAS,KAAK,OAAO;QACrB,MAAM,KAAK,IAAI,IAAI,EAAE;QACrB,OAAO,KAAK,KAAK,IAAI;QACrB;IACF;IAEA,OAAO;QAAE,OAAO;YAAE;QAAK;IAAE;AAC3B"}}]
}