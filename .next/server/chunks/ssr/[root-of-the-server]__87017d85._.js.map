{"version":3,"sources":["../../../../lib/posts.ts","../../../../lib/tags.ts","turbopack:///[project]/styles/Tags.module.css [ssr] (css module)","../../../../pages/tags.tsx","../../../../node_modules/.pnpm/next%4016.1.4_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/dist/esm/build/templates/pages.js"],"sourcesContent":["// /lib/posts.ts\nimport fs from \"fs\";\nimport path from \"path\";\nimport matter from \"gray-matter\";\n\nexport interface Post {\n  title: string;\n  date: string;\n  summary: string;\n  tags: string[];\n  cover?: string;\n  slug: string;\n  content: string;\n}\n\nexport interface PostMeta {\n  title: string;\n  date: string;\n  summary: string;\n  tags: string[];\n  cover?: string;\n  slug: string;\n}\n\nconst postsDirectory = path.join(process.cwd(), \"posts\");\nlet postsCache: Post[] | null = null;\nlet postsMetaCache: PostMeta[] | null = null;\nconst postBySlugCache = new Map<string, Post>();\n\n// Ëé∑ÂèñÊâÄÊúâ posts ÂÖÉÊï∞ÊçÆÔºà‰∏çËØª contentÔºâ\nexport function getAllPostsMeta(tag?: string): PostMeta[] {\n  if (postsMetaCache) {\n    const cached = postsMetaCache;\n    return tag ? cached.filter((post) => post.tags.includes(tag)) : [...cached];\n  }\n\n  const filenames = fs.readdirSync(postsDirectory);\n\n  let posts: PostMeta[] = filenames\n    .filter((filename) => filename.endsWith(\".md\"))\n    .map((filename) => {\n      const filePath = path.join(postsDirectory, filename);\n      const fileContents = fs.readFileSync(filePath, \"utf8\");\n      const { data } = matter(fileContents);\n\n      return {\n        slug: filename.replace(/\\.md$/, \"\"),\n        title: data.title,\n        date: data.date,\n        summary: data.summary,\n        tags: data.tags || [],\n        cover: data.cover || null,\n      };\n    });\n\n  if (tag) {\n    posts = posts.filter((post) => post.tags.includes(tag));\n  }\n\n  posts.sort((a, b) => (a.date < b.date ? 1 : -1));\n\n  postsMetaCache = posts;\n  return posts;\n}\n\n// Ëé∑ÂèñÊâÄÊúâ postsÔºåÂèØÈÄâÊåâ tag ËøáÊª§\nexport function getAllPosts(tag?: string): Post[] {\n  if (postsCache) {\n    const cached = postsCache;\n    return tag ? cached.filter((post) => post.tags.includes(tag)) : [...cached];\n  }\n\n  const filenames = fs.readdirSync(postsDirectory);\n\n  let posts: Post[] = filenames\n    .filter((filename) => filename.endsWith(\".md\"))\n    .map((filename) => {\n      const filePath = path.join(postsDirectory, filename);\n      const fileContents = fs.readFileSync(filePath, \"utf8\");\n      const { data, content } = matter(fileContents);\n\n      return {\n        slug: filename.replace(/\\.md$/, \"\"),\n        title: data.title,\n        date: data.date,\n        summary: data.summary,\n        tags: data.tags || [],\n        cover: data.cover || null,\n        content,\n      };\n    });\n\n  if (tag) {\n    posts = posts.filter((post) => post.tags.includes(tag));\n  }\n\n  // üëâ Âª∫ËÆÆÈ°∫ÊâãÊåâÊó∂Èó¥Êéí‰∏Ä‰∏ã\n  posts.sort((a, b) => (a.date < b.date ? 1 : -1));\n\n  postsCache = posts;\n  return posts;\n}\n\n// ÂçïÁØá\nexport function getPostBySlug(slug: string): Post | null {\n  if (postBySlugCache.has(slug)) {\n    return postBySlugCache.get(slug) || null;\n  }\n\n  const filePath = path.join(postsDirectory, `${slug}.md`);\n  if (!fs.existsSync(filePath)) return null;\n\n  const fileContents = fs.readFileSync(filePath, \"utf8\");\n  const { data, content } = matter(fileContents);\n\n  const post = {\n    slug,\n    title: data.title,\n    date: data.date,\n    summary: data.summary,\n    tags: data.tags || [],\n    cover: data.cover || null,\n    content,\n  } as Post;\n\n  postBySlugCache.set(slug, post);\n  return post;\n}\n","// lib/tags.ts\n\nexport const tagMap: Record<string, string> = {\n  daily: \"„Å´„Å°„Åò„Çá„ÅÜ„Çä„Çá„Åè\",\n  milestone: \"O Especial\",\n  topic: \"Â§öË∞àË∞àÈóÆÈ¢ò\",\n  cheatsheet: \"CheatSheet\",\n};\n","__turbopack_context__.v({\n  \"icon\": \"Tags-module__ba7cKq__icon\",\n  \"main\": \"Tags-module__ba7cKq__main\",\n  \"tagCloud\": \"Tags-module__ba7cKq__tagCloud\",\n  \"tagItem\": \"Tags-module__ba7cKq__tagItem\",\n  \"title\": \"Tags-module__ba7cKq__title\",\n});\n","// /pages/tags.tsx\nimport Link from \"next/link\";\nimport Header from \"../components/Header\";\nimport { getAllPostsMeta, PostMeta } from \"../lib/posts\";\nimport { tagMap } from \"../lib/tags\";\nimport SEO from \"../components/SEO\";\nimport styles from \"../styles/Tags.module.css\";\nimport Image from \"next/image\";\n\ninterface TagsPageProps {\n  tags: { name: string; count: number }[];\n}\n\nexport default function Tags({ tags }: TagsPageProps) {\n  // ÊåâÁÉ≠Â∫¶ÊéíÂ∫è\n  const sortedTags = [...tags].sort((a, b) => b.count - a.count);\n  const maxCount = sortedTags[0]?.count || 1;\n\n  return (\n    <>\n      <SEO title=\"TAGS - KuromiPiPi\" />\n\n      <div\n        className=\"container\"\n        // style={{ maxWidth: \"640px\", margin: \"0 auto\" }}\n      >\n        <Header\n          buttons={[\n            // { label: \"HOME\", href: \"/\" },\n            { label: \"POSTS\", href: \"/posts\" },\n            // { label: \"COZYDIARY\", href: \"/cozydiary\" },\n            // { label: \"MOMENTS\", href: \"/moments\" },\n            // { label: \"TAGS\", href: \"/tags\" },\n            // { label: \"NOW\", href: \"/now\" },\n          ]}\n        />\n\n        <main className={styles.main}>\n          <h1 className={styles.title}>Tags</h1>\n\n          <div className={styles.tagCloud}>\n            {sortedTags.map((tag) => {\n              const fontSize = 0.8 + (tag.count / maxCount) * 1.5; // 0.8rem ~ 2.3rem\n\n              return (\n                <Link key={tag.name} href={`/tags/${tag.name}`}>\n                  <div\n                    className={styles.tagItem}\n                    style={{ fontSize: `${fontSize}rem` }}\n                  >\n                    <Image\n                      src=\"/icon/pound.svg\"\n                      alt=\"#\"\n                      width={16}\n                      height={16}\n                      className={styles.icon}\n                    />\n                    {tagMap[tag.name] || tag.name}\n                  </div>\n                </Link>\n              );\n            })}\n          </div>\n        </main>\n      </div>\n    </>\n  );\n}\n\n// Ëé∑ÂèñÊ†áÁ≠æÂèäÊùÉÈáç\nexport async function getStaticProps() {\n  const posts: PostMeta[] = getAllPostsMeta();\n\n  const tagCountMap: Record<string, number> = {};\n\n  posts.forEach((post) => {\n    post.tags.forEach((t) => {\n      tagCountMap[t] = (tagCountMap[t] || 0) + 1;\n    });\n  });\n\n  const tags = Object.entries(tagCountMap).map(([name, count]) => ({\n    name,\n    count,\n  }));\n\n  return {\n    props: { tags },\n  };\n}\n","import { PagesRouteModule } from \"next/dist/esm/server/route-modules/pages/module.compiled\";\nimport { RouteKind } from \"next/dist/esm/server/route-kind\";\nimport { hoist } from \"next/dist/esm/build/templates/helpers\";\n// Import the app and document modules.\nimport * as document from \"INNER_DOCUMENT\";\nimport * as app from \"INNER_APP\";\n// Import the userland code.\nimport * as userland from \"INNER_PAGE\";\nimport { getHandler } from \"next/dist/esm/server/route-modules/pages/pages-handler\";\n// Re-export the component (should be the default export).\nexport default hoist(userland, 'default');\n// Re-export methods.\nexport const getStaticProps = hoist(userland, 'getStaticProps');\nexport const getStaticPaths = hoist(userland, 'getStaticPaths');\nexport const getServerSideProps = hoist(userland, 'getServerSideProps');\nexport const config = hoist(userland, 'config');\nexport const reportWebVitals = hoist(userland, 'reportWebVitals');\n// Re-export legacy methods.\nexport const unstable_getStaticProps = hoist(userland, 'unstable_getStaticProps');\nexport const unstable_getStaticPaths = hoist(userland, 'unstable_getStaticPaths');\nexport const unstable_getStaticParams = hoist(userland, 'unstable_getStaticParams');\nexport const unstable_getServerProps = hoist(userland, 'unstable_getServerProps');\nexport const unstable_getServerSideProps = hoist(userland, 'unstable_getServerSideProps');\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesRouteModule({\n    definition: {\n        kind: RouteKind.PAGES,\n        page: \"/tags\",\n        pathname: \"/tags\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n    relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n    components: {\n        // default export might not exist when optimized for data only\n        App: app.default,\n        Document: document.default\n    },\n    userland\n});\nexport const handler = getHandler({\n    srcPage: \"/tags\",\n    config,\n    userland,\n    routeModule,\n    getStaticPaths,\n    getStaticProps,\n    getServerSideProps\n});\n\n//# sourceMappingURL=pages.js.map\n"],"names":[],"mappings":"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","ignoreList":[4]}